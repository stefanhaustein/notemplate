<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>TODO</title>
</head>
<body>
<style>
  label, input, button {display:block;}
</style>
  
<p>A simple todo list inspired by the corresponding
  <a href="https://reactjs.org/">React</a> example.</p>

<h3>TODO</h3>

<div id="todos-example"></div>

<script src="../src/notemplate.js"></script>
<script type="text/javascript">

// Example, using the (deprecated) element-function (for testing purposes)

  var state = {
    text: "",
    items: []
  };

  function todoList(items) {
    return element("ul", items.map(item =>
      element("li", {key: item.id}, item.text)));
  }

  function handleSubmit(event) {
    event.preventDefault();
    const newItem = {
      text: state.text,
      id: Date.now()
    };
    state.items.push(newItem);
    render();
  }

  function render() {
    document.getElementById("todos-example").replaceWith(
      element("div", {id: "todos-example"},
        todoList(state.items),
        element("form", {submit: handleSubmit},
          element("label", "What needs to be done?", {htmlFor: "new-todo"}),
          element("input", {
            id: "new-todo",
            change: e => state.text = e.target.value,
            autofocus: true,
            value: state.text}),
          element("button", "Add #", this.state.items.length + 1))));
  }

  render();
</script>
</body>
</html>
